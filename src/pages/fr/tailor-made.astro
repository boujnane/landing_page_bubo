---
import { t, changeLanguage } from "i18next";
// import BlogCard from "@/components/cards/blog-card.astro";
import BlogHeader from "@/components/blog-header.astro";
import BlogCard from "@/components/cards/blog-card.astro";
import HeaderSection from "@/components/sections/header-section.astro";
import MainLayout from "@/layouts/main-layout.astro";
import { getTailorMadePosts } from "@/lib/fetchers";
import { Icon } from "astro-icon/components";
import { useLocation } from "@/lib/location";

changeLanguage("fr");

const { lang } = useLocation(Astro.url.pathname);
const posts = await getTailorMadePosts(lang);
---

<MainLayout title="Data & AI Consulting" description="Data & AI consulting section">
    <section class="container py-16">
        <!-- Blog Section -->
        <HeaderSection
        label={t("services.tailor_made") || ""}
        title={t("common.our_process")}
        subtitle={t("explore.bringing_our_customers") || ""}
        />
        <section>
            <div class="py-32">
              <div class="container max-w-7xl">
                <div class="relative">
                  <div class="relative z-10 grid grid-cols-6 gap-6">
                    {/* Step 1: Needs Analysis */}
                    <div class="relative col-span-full lg:col-span-2 flex flex-col items-center overflow-hidden rounded-2xl border bg-background p-8">
                      <Icon name="lucide:file-text" class="size-10 text-[#fe8301]" />
                      <h2 class="mt-6 font-heading text-3xl md:text-4xl text-center">
                        {t("common.needs_analysis")}
                      </h2>
                      <p class="mt-4 text-center text-muted-foreground">
                        {t("explore.understand_the_client_requirements")}
                      </p>
                    </div>
                    {/* Step 2: Solution Design */}
                    <div class="relative col-span-full lg:col-span-2 flex flex-col items-center overflow-hidden rounded-2xl border bg-background p-8">
                      <Icon name="lucide:layers" class="size-10 text-[#fe8301]" />
                      <h2 class="mt-6 font-heading text-3xl md:text-4xl text-center">
                        {t("common.solution_design")}
                      </h2>
                      <p class="mt-4 text-center text-muted-foreground">
                        {t("explore.develop_detailed_specifications")}
                      </p>
                    </div>
                    {/* Step 3: Development */}
                    <div class="relative col-span-full lg:col-span-2 flex flex-col items-center overflow-hidden rounded-2xl border bg-background p-8">
                      <Icon name="lucide:code" class="size-10 text-[#fe8301]" />
                      <h2 class="mt-6 font-heading text-3xl md:text-4xl text-center">
                        {t("common.development")}
                      </h2>
                      <p class="mt-4 text-center text-muted-foreground">
                        {t("explore.build_the_custom_solution")}
                      </p>
                    </div>
                    {/* Step 4: Testing and Validation (with internal grid) */}
                    <div class="relative col-span-full overflow-hidden rounded-2xl border bg-background p-8 lg:col-span-3 flex flex-col items-center justify-center">
                      <Icon name="lucide:check-circle" class="size-10 text-[#fe8301]" />
                      <h2 class="mt-6 font-heading text-3xl md:text-4xl text-center">
                        {t("common.testing_and_validation")}
                      </h2>
                      <p class="mt-4 text-center text-muted-foreground max-w-md">
                        {t("explore.test_the_solution_to_ensure")}
                      </p>
                    </div>
                    {/* Step 5: Deployment and Support (with internal grid) */}
                    <div class="relative col-span-full overflow-hidden rounded-2xl border bg-background p-8 lg:col-span-3 flex flex-col items-center justify-center">
                      <Icon name="lucide:cloud" class="size-10 text-[#fe8301]" />
                      <h2 class="mt-6 font-heading text-3xl md:text-4xl text-center">
                        {t("common.deployment_and_support")}
                      </h2>
                      <p class="mt-4 text-center text-muted-foreground max-w-md">
                        {t("explore.deploy_the_solution_to_production")}
                      </p>
                    </div>
                  </div>
                  <BlogHeader title={t("services.tailor_made")} />

                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-10 md:gap-y-14 lg:gap-y-16 lg:gap-x-10 mt-16">
                    {posts
                      // .filter((post) => post.data.category !== "Others")
                      .map((post) => <BlogCard key={post.id} {...post} />)}
                  </div>
                </div>
              </div>
            </div>
          </section>
      </section>
</MainLayout>
